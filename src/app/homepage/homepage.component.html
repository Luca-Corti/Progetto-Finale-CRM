<nz-layout class="layout">
  <nz-sider nzCollapsible nzBreakpoint="lg" [nzCollapsedWidth]="0">
    <div class="logo" routerLink="/home"><img src="../../assets/logo-spaces.webp" alt="logo"></div>
    <ul nz-menu nzTheme="dark" nzMode="inline">
      <li nz-menu-item routerLink="/clienti">
        <i nz-icon nzType="user" nzTheme="outline"></i>
        <span>Clienti</span>
      </li>
      <li nz-menu-item routerLink="/fatture">
        <i nz-icon nzType="file-search" nzTheme="outline"></i>
        <span>Fatture</span>
      </li>
      <li nz-menu-item routerLink="/utenti">
        <i nz-icon nzType="team" nzTheme="outline"></i>
        <span>Utenti</span>
      </li>
      <li nz-menu-item routerLink="/admin">
        <i nz-icon nzType="font-colors" nzTheme="outline"></i>
        <span>Admin</span>
      </li>
    </ul>
  </nz-sider>
  <nz-layout>
    <nz-header>

      <nz-page-header-extra>
        <button nz-button routerLink="/register">SignUp</button>
        <button *ngIf="width>400" nz-button nzType="primary" nzDanger (click)="logout()">Logout</button>
        <nz-avatar nz-page-header-avatar nzSrc="https://avatars0.githubusercontent.com/u/22736418?s=88&v=4"></nz-avatar>
        <a nz-dropdown [nzDropdownMenu]="menu" >
          <nz-page-header-title>{{nomeAccount}}<i nz-icon nzType="down" style="font-size: 10px;"></i>
          </nz-page-header-title>
          <nz-page-header-tags>
            <nz-tag [nzColor]="status.color">{{status.name}}</nz-tag>
          </nz-page-header-tags>
        </a>
        <nz-dropdown-menu #menu="nzDropdownMenu">
          <ul nz-menu nzSelectable>
            <li nz-menu-item>Il mio profilo</li>
            <li nz-menu-item>Settings</li>
            <li nz-submenu nzTitle="Cambia stato">
              <ul>
                <li nz-menu-item (click)="changeStatus('Online')">Online</li>
                <li nz-menu-item (click)="changeStatus('ND')">Non disponibile</li>
                <li nz-menu-item (click)="changeStatus('Offline')">Offline</li>
                <li nz-menu-item (click)="changeStatus('Invisibile')">Invisibile</li>
              </ul>
            <li nz-menu-item>Invia un feedback</li>
            <li nz-menu-item nzDanger  (click)="logout()">Esci</li>
          </ul>
        </nz-dropdown-menu>
      </nz-page-header-extra>


    </nz-header>
    <nz-content>
      <div class="container" >
        <h2>Funzionamento app:</h2>
        <div class="container border">
        <p>Landing page iniziale se non si è loggati con link alle pagine signUp e Login</p>
        <p>pagine signup e login tra loro linkate, al login salvo l'utente nel localstorage e ne consento la permanenza fino al logout</p>
        <p>Una volta loggato ho accesso a:</p>
        <p>3 pagine principali, clienti fatture e utenti protette da guard su login+ 1 pagina per admin protetta ulteriormente da role=admin e pagina 404 per rotte **</p>
      </div>
      <div class="container border">
        <p>Nella pagina clienti abbiamo la lista di tutti i clienti con paginazione lato server e qui possiamo:</p>
        <ul>
        <li>Visitare la pagina dettaglio (che si passa i dati dalla pagina padre risparmiando chiamate al server)</li>
        <li>Creare un nuovo cliente</li>
        <li>Cercare un cliente per id o ragione sociale</li>
      </ul>
        <p>Nella pagina dettaglio cliente possiamo:</p>
        <ul>
        <li>Modificare il cliente</li>
        <li>Cancellare il cliente</li>
        <li>Aggiungere una nuova fattura a lui correlata</li>
        <li>Visualizzare tutte le fatture di quel cliente specifico, paginazione lato client/li>
      </ul>
    </div>
    <div class="container border">
        <p>Nella pagina Fatture abbiamo la lista di tutte le fatture con paginazione lato server e qui possiamo:</p>
        <ul>
        <li>Vedere il dettaglio fattura(sempre passaggio dati padre-figlio)</li>
        <li>Creare una nuova fattura mediante un modale che presenta una ricerca del cliente a cui aggiungere la medesima</li>
        <li>Cercare una fattura per id, id cliente, Stato fattura ed anno tramite un modale.</li>
        </ul>
        <p>Il risultato della ricerca è paginato lato client, risparmiando molte chiamate al server</p>
        <p>Nel dettaglio fattura possiamo modificare lo stato o cancellare la fattura</p>
      </div>
      <div class="container border">
        <p>Nella pagina utenti abbiamo la lista utenti paginata lato server </p>
      </div>
      <div class="container border">
        <p>Nella pagina Admin un admin potrebbe modificare o cancellare un utente (azioni non contemplate lato server)</p>
      </div>
      <div class="container border">
        <p>Nell'header di tutte le pagine abbiamo, oltre al signup e logout, il profilo dell'account loggato</p>
        <p>con possibilità di cambiare lo stato dal menù a tendina</p>
      </div>
      <div class="container border">
        <p>L'app è responsive per dispositivi mobile, (es. tabelle e modali hanno colonne e visualizzazioni diverse in base all width del device)</p>
        <p>La width del device viene presa On init dell'app, quindi per i test se si apre l'ispeziona per i test responsive da width>400,e viceversa,  bisogna refreshare</p>
      </div>
      </div>
    </nz-content>

  </nz-layout>
</nz-layout>
